---
import HamburgerMenu from "@icons/HamburgerMenu.astro";
import Cart from "@icons/Cart.astro";
import Image from "@components/Image.astro";

// Obtiene la ruta actual desde Astro
const currentPath = Astro.url.pathname;
---

<nav class="backdrop-blur-md fixed top-0 left-0 right-0 z-50">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
        <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
            <Image imagePath="/src/assets/logo.webp" altText="Logo Pizza Galaxia" classname="h-8 w-auto" />
            <h1 class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">Pizza Galaxia</h1>
        </a>
        <button id="menu-toggle" data-collapse-toggle="navbar-default" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-default" aria-expanded="false">
            <HamburgerMenu />
        </button>
        <div class="hidden w-full md:block md:w-auto" id="navbar-sticky">
            <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 border md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0">
                <li>
                    <a href="/" class={`block py-2 px-3 rounded md:p-0 ${currentPath === "/" ? "text-blue-700 dark:text-blue-500" : "text-gray-900 hover:text-blue-700 dark:text-white dark:hover:text-blue-500"}`} aria-current={currentPath === "/" ? "page" : undefined}>Inicio</a>
                </li>
                <li>
                    <a href="/location" class={`block py-2 px-3 rounded md:p-0 ${currentPath === "/location" ? "text-blue-700 dark:text-blue-500" : "text-gray-900 hover:text-blue-700 dark:text-white dark:hover:text-blue-500"}`} aria-current={currentPath === "/location" ? "page" : undefined}>Pedir online</a>
                </li>
                <li>
                    <a href="/cart" aria-label="Ir al carrito de compras" class={`block py-2 px-3 rounded md:p-0 ${currentPath === "/cart" ? "text-blue-700 dark:text-blue-500" : "text-gray-900 hover:text-blue-700 dark:text-white dark:hover:text-blue-500"}`} aria-current={currentPath === "/cart" ? "page" : undefined}><Cart /></a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<style>
    #navbar-sticky {
        display: none;
    }

    #navbar-sticky.show {
        display: block;
    }

    @media (min-width: 768px) {
        #navbar-sticky {
            display: flex !important;
        }
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const menuToggle = document.getElementById("menu-toggle");
        const navbar = document.getElementById("navbar-sticky");

        if (menuToggle && navbar) {
            menuToggle.addEventListener("click", function () {
                navbar.classList.toggle("show");
                const isExpanded = navbar.classList.contains("show");
                menuToggle.setAttribute("aria-expanded", isExpanded ? "true" : "false");
            });
        }
    });
</script>
